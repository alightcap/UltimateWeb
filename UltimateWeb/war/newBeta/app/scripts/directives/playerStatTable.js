// Generated by CoffeeScript 1.7.1
'use strict';
angular.module('newBetaApp').directive('playerStatTable', function($routeParams, playerStats, filter) {
  return {
    templateUrl: 'includes/partials/playerStatTable.html',
    restrict: 'E',
    scope: {
      playerName: '='
    },
    link: function(scope, element, attrs) {
      var init;
      playerStats.then(function(response) {
        return init(response);
      });
      scope.included = filter.included;
      scope.$watch('included', function() {
        scope.myStats = typeof playerStats.getAll === "function" ? playerStats.getAll()[scope.playerName] : void 0;
        return scope.teamAverage = typeof playerStats.getAverages === "function" ? playerStats.getAverages() : void 0;
      });
      return init = function(api) {
        scope.playerStats = api.getAll()[scope.playerName].stats;
        scope.teamAverage = api.getAverages();
        return scope.statTypes = _.keys(scope.playerStats).sort();
      };
    }
  };
});
